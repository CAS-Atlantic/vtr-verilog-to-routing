# proc copied from: https://wiki.tcl-lang.org/page/pdict%3A+Pretty+print+a+dict
proc pdict { d {i 0} {p "  "} {s " -> "} } {
    global $d
    set fRepExist [expr {0 < [llength\
                                  [info commands tcl::unsupported::representation]]}]
    if { (![string is list $d] || [llength $d] == 1)
         && [uplevel 1 [list info exists $d]] } {
        set dictName $d
        unset d
        upvar 1 $dictName d
        log "dict $dictName"
    }
    if { ! [string is list $d] || [llength $d] % 2 != 0 } {
        return -code error  "error: pdict - argument is not a dict"
    }
    set prefix [string repeat $p $i]
    set max 0
    foreach key [dict keys $d] {
        if { [string length $key] > $max } {
            set max [string length $key]
        }
    }
    dict for {key val} ${d} {
        lognnl "${prefix}[format "%-${max}s" $key]$s"
        if {    $fRepExist && [string match "value is a dict*"\
                                   [tcl::unsupported::representation $val]]
                || ! $fRepExist && [string is list $val]
                && [llength $val] % 2 == 0 } {
            log ""
            pdict $val [expr {$i+1}] $p $s
        } else {
            log "'${val}'"
        }
    }
    return
}
